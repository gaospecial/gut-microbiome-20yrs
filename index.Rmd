--- 
title: "肠道菌群研究二十年·大数据"
author: "热心肠研究院"
date: "`r Sys.Date()`"
always_allow_html: true
documentclass: ctexbook
bibliography: [book.bib, packages.bib]
biblio-style: apalike
link-citations: yes
colorlinks: yes
lot: yes
lof: yes
geometry: [a4paper, tmargin=2.5cm, bmargin=2.5cm, lmargin=3.5cm, rmargin=2.5cm]
site: bookdown::bookdown_site
description: "从20年肠道菌群研究大数据看肠道菌群研究的未来"
github-repo: gaospecial/whitePaper2020
#cover-image: images/cover.jpg
---

```{r setup, include=FALSE}
options(
  htmltools.dir.version = FALSE, formatR.indent = 2, width = 55, digits = 4,
  tinytex.verbose = TRUE
)

knitr::opts_chunk$set(fig.width = 8,
                      fig.asp=0.618,
                      include=TRUE)

# disable Sys.setlocale output
Sys.setenv(LANG="zh_CN.UTF-8")
Sys.setenv(LANGUAGE = "en") #显示英文报错信息
Sys.setlocale(category = "LC_ALL",locale = "Chinese")

# https://stackoverflow.com/questions/32826906/how-to-solve-protection-stack-overflow-issue-in-r-studio
options(expressions = 5e5)

# 填上你需要用到的包，如 c('ggplot2', 'dplyr')
packages <- c("tidyverse","wordcloud2","mrgut","lubridate","RColorBrewer","export","gganimate","ggVennDiagram","ccgraph")

lapply(packages, function(pkg) {
  if (system.file(package = pkg) == '') install.packages(pkg)
})
```



```{r load_pacakges}
# load frequentely used packages
library(tidyverse)
library(lubridate)
library(mrgut)
library(RColorBrewer)
library(knitr)
library(export)
library(cowplot)
library(knitr)
library(bibliometrix)

```

```{r colors}
# display.brewer.pal(7,"PuBuGn")
cols <- brewer.pal(n=7,name = "PuBuGn")[c(-1,-2)]
pal <- colorRampPalette(cols)
```


```{r}
# 要导出为PowerPoint的图片
graph_ppt_file <- paste0(Sys.Date(),"_graph.pptx")
```


```{r}
theme_labs <- 
  theme(plot.title = element_text(size = 12, face = "bold",hjust = 0.5),
        plot.subtitle = element_text(size = 8,
                                     hjust = 1,
                                     color = "grey50"),
        plot.caption = element_text(size=8, 
                                    hjust = 1,
                                    color = "grey50",
                                    vjust = 1,
                                    lineheight = 1.1),
        legend.position = "none")

theme_set(theme_light() + theme_labs)
```

```{r}
# 读取数据
M <- readRDS("data/M.RDS") %>% filter(PY < 2020)
 # 全部论文
journal_IF <- readRDS("data/journal_IF.RDS") %>% as_tibble() %>%  mutate_at("impact_factor",as.numeric) 
 # 期刊最新影响因子（2019）
highly_cited <- M %>% filter(HC==TRUE)  # 高引论文

M <- M %>% left_join(journal_IF) %>%
  filter(impact_factor > -1) %>%  # 只选取有影响因子的期刊
  mutate(group=cut(impact_factor,
                   breaks = c(-Inf,3,5,10,20,Inf),
                   labels = c("<3",">3",">5",">10",">20")))
```

```{r}
# 需要从 M 中提取作者、通讯作者、单位、国家等信息。
# 作者全名在 M$AF ，通讯作者在 M$RP（但是只有缩写）；
# 机构信息在 M$C1 中。

```


# 前言 {-}

《热心肠日报》持续追踪“肠道菌群”研究进展马上已经有四年了。在四年的持续输出下，《日报》已经成为广大用户了解相关研究进展的一个窗口，受到很多老师、同学的喜爱和赞誉。但我们深知，《日报》仅能管中窥豹，难免会有错漏之处。在2019年底，在“肠道菌群研究的七大事实和五大倡议”一文创作期间，我们下载分析了 Web of Science 数据库中“肠道菌群”研究的全部论文数据，为文章提供数据支撑。

蓦然回首，我们发现自进入21世纪，美国率先提出人体微生物组计划以来，“肠道菌群”已经兴起了十余年。在进入 2020 年的最初几天，我们很快有一个想法，就是调研一下过去二十年“肠道菌群”研究的发展历程。

于是，我们写了一本书。这本书是这样的，第 \@ref(intro) 章介绍了肠道菌群研究的概述，第 \@ref(global) 章说了啥啥，然后是啥啥……

我用了两个 R 包编译这本书，分别是 **knitr**\index{knitr} [@xie2015] 和 **bookdown**\index{bookdown} [@R-bookdown]。以下是我的 R 进程信息：

```{r include=TRUE}
sessionInfo()
```

## 致谢 {-}

非常感谢谁谁以及谁谁对我的帮助。艾玛，要不是他们神一样的队友，我花两年时间也写不完这本书。

```{block2, type='flushright', html.tag='p'}
张三  
于 A 村某角落
```

